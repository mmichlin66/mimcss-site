!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("mimcss")):"function"==typeof define&&define.amd?define(["mimcss"],e):"object"==typeof exports?exports.mimbl=e(require("mimcss")):t.mimbl=e(t.mimcss)}(this,(function(t){return(()=>{"use strict";var e,r,s={29:e=>{e.exports=t}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={exports:{}};return s[t](r,r.exports,i),r.exports}r=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(t,s){if(1&s&&(t=this(t)),8&s)return t;if("object"==typeof t&&t){if(4&s&&t.__esModule)return t;if(16&s&&"function"==typeof t.then)return t}var n=Object.create(null);i.r(n);var o={};e=e||[null,r({}),r([]),r(r)];for(var l=2&s&&t;"object"==typeof l&&!~e.indexOf(l);l=r(l))Object.getOwnPropertyNames(l).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,i.d(n,o),n},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{Component:()=>Y,Defer:()=>fe,ElmRef:()=>B,EventSlot:()=>t,Fragment:()=>Z,FuncProxy:()=>tt,PromiseProxy:()=>et,Ref:()=>_,computed:()=>C,createComputedTrigger:()=>g,createMultiEventSlot:()=>e,createMutator:()=>N,createPromiseEx:()=>pe,createTextVN:()=>J,createTrigger:()=>l,createWatcher:()=>a,enterMutationScope:()=>p,exitMutationScope:()=>f,getCallbackArg:()=>z,isSvg:()=>ce,isSvgSvg:()=>de,jsx:()=>L,mimblStyleSchedulerType:()=>he,mount:()=>rt,noWatcher:()=>it,ref:()=>$,registerCustomAttribute:()=>Q,registerCustomEvent:()=>X,setRef:()=>K,symRenderNoWatcher:()=>nt,trigger:()=>A,unmount:()=>st,updatable:()=>ot,wrapCallback:()=>q});class t{fire=this.realFire;attach(t){this.listeners||(this.listeners=new Set),this.listeners.add(t)}detach(t){this.listeners&&(this.listeners.delete(t),0===this.listeners.size&&(this.listeners=null))}get count(){return this.listeners?this.listeners.size:0}clear(){this.listeners=null}listeners;realFire(){if(this.listeners)for(let t of this.listeners)t(...arguments)}}function e(){return new Proxy({},new r)}class r{get(t,e,r){return this[e]?this[e]:new s(this,e)}}class s{handler;prop;slot;constructor(t,e){this.handler=t,this.prop=e}fire(){this.slot&&this.slot.fire(...arguments)}clear(){this.slot&&this.slot.clear()}attach(e){this.slot||(this.slot=this.handler[this.prop]=new t),this.slot.attach(e)}detach(t){this.slot&&this.slot.detach(t)}get count(){return this.slot?this.slot.count:0}}var n;function l(t,e){return new u(t<0?0:t,e)}!function(t){t[t.Value=0]="Value",t[t.Shallow=1]="Shallow",t[t.Deep=100]="Deep"}(n||(n={}));class u{constructor(t,e){this.depth=t,this.v=b(e,this,t)}get(){return this.notifyRead(),this.v}set(t){t!==this.v&&(this.v=b(t,this,this.depth),this.notifyChanged())}notifyRead(){d.notifyTriggerRead(this)}notifyChanged(){this.watchers.size>0&&d.notifyTriggerChanged(this)}depth;v;watchers=new Set}let h=Symbol("symWatcher");function a(t,e,r,s){function n(...t){return n[h].execute(this,t)}return n[h]=new c(t,e,r,s),n.dispose=function(){let t=n[h];t&&t.dispose(),delete n[h]},n}class c{constructor(t,e,r,s){this.func=t,this.responder=e,this.funcThis=r,this.responderThis=s||r}execute(t,e){if(!this.func)throw new Error("Disposed watcher was called.");!this.funcThis&&t&&(this.funcThis=t,this.responderThis||(this.responderThis=t)),this.clean(),d.pushWatcher(this);try{return this.func.apply(this.funcThis,e)}finally{d.popWatcher()}}dispose(){this.func&&(this.clean(),this.func=null,this.responder=null,this.funcThis=null,this.responderThis=null)}respond(){this.responder&&this.responder.apply(this.responderThis)}clean(){this.triggers.forEach((t=>t.watchers.delete(this))),this.triggers.clear(),d.removeDeferredWatcher(this)}func;responder;funcThis;responderThis;triggers=new Set}let d=new class{pushWatcher(t){this.watcherStack.push(t)}popWatcher(){this.watcherStack.pop()}removeDeferredWatcher(t){this.deferredWatchers.delete(t)}enterMutationScope(){this.mutationScopesRefCount++}exitMutationScope(){if(0===this.mutationScopesRefCount)throw Error("Unpaired call to exitMutationScope");if(0==--this.mutationScopesRefCount){let t=Array.from(this.deferredWatchers.keys());this.deferredWatchers.clear(),t.forEach((t=>t.respond()))}}notifyTriggerRead(t){for(let e of this.watcherStack)e.triggers.add(t),t.watchers.add(e)}notifyTriggerChanged(t){this.mutationScopesRefCount>0?t.watchers.forEach((t=>this.deferredWatchers.add(t))):Array.from(t.watchers.keys()).forEach((t=>t.respond()))}watcherStack=[];mutationScopesRefCount=0;deferredWatchers=new Set};function p(){d.enterMutationScope()}function f(){d.exitMutationScope()}function g(t,e){return new m(t,e)}class m extends u{constructor(t,e){super(n.Value),this.func=t,this.funcThis=e,this.isStale=!0}get(){return this.isStale&&(this.funcWatcher||(this.funcWatcher=a(this.func,this.responder,this.funcThis,this)),super.set(this.funcWatcher()),this.isStale=!1),super.get()}dispose(){this.func&&(this.funcWatcher&&(this.funcWatcher.dispose(),this.funcWatcher=null),this.func=null)}responder(){this.watchers.size>0?super.set(this.funcWatcher()):this.isStale=!0}func;funcThis;funcWatcher;isStale}let y=Symbol("symMutator");function N(t,e){function r(...t){return r[h].execute(this,t)}return r[y]=new v(t,e),r.dispose=function(){let t=r[y];t&&t.dispose(),delete r[y]},r}class v{constructor(t,e){this.func=t,this.funcThis=e}execute(t,e){if(!this.func)throw new Error("Disposed mutator was called.");!this.funcThis&&t&&(this.funcThis=t),d.enterMutationScope();try{return this.func.apply(this.funcThis,e)}finally{d.exitMutationScope()}}dispose(){this.func&&(this.func=null,this.funcThis=null)}func;funcThis}function b(t,e,r){return t&&0!==r?Array.isArray(t)?new Proxy(t,new w(e,(r||n.Shallow)-1)):t instanceof Map?new Proxy(t,new x(e,(r||n.Shallow)-1)):t instanceof Set?new Proxy(t,new D(e,(r||n.Shallow)-1)):t.constructor===Object?new Proxy(t,new w(e,(r||n.Deep)-1)):t:t}class w{constructor(t,e){this.trigger=t,this.depth=e}get(t,e,r){return this.trigger.notifyRead(),Reflect.get(t,e,r)}set(t,e,r,s){return Reflect.get(t,e,s)==r||(this.trigger.notifyChanged(),Reflect.set(t,e,b(r,this.trigger,this.depth),s))}deleteProperty(t,e){return this.trigger.notifyChanged(),Reflect.deleteProperty(t,e)}defineProperty(t,e,r){return this.trigger.notifyChanged(),Reflect.defineProperty(t,e,r)}has(t,e){return this.trigger.notifyRead(),Reflect.has(t,e)}getPrototypeOf(t){return this.trigger.notifyRead(),Reflect.getPrototypeOf(t)}isExtensible(t){return this.trigger.notifyRead(),Reflect.isExtensible(t)}getOwnPropertyDescriptor(t,e){return this.trigger.notifyRead(),Reflect.getOwnPropertyDescriptor(t,e)}ownKeys(t){return this.trigger.notifyRead(),Reflect.ownKeys(t)}trigger;depth}class S{constructor(t,e,r){this.trigger=t,this.mutatorMethodNames=e,this.depth=r}get(t,e,r){this.trigger.notifyRead();let s=this,n=this.wrappedMethods.get(e);if(!n){let r=t[e];if("function"!=typeof r)return r;let i=r.bind(t);n=this.mutatorMethodNames.has(e)?function(){let r=s.callOrgMutatorMethod(t,e,i,...arguments);return r[1]&&s.trigger.notifyChanged(),r[0]}:function(){return s.trigger.notifyRead(),i(...arguments)},this.wrappedMethods.set(e,n)}return n}callOrgMutatorMethod(t,e,r,...s){return[void 0,!1]}trigger;depth;mutatorMethodNames;wrappedMethods=new Map}class x extends S{static mutatorMethodNames=new Set(["clear","delete","set"]);constructor(t,e){super(t,x.mutatorMethodNames,e)}callOrgMutatorMethod(t,e,r,...s){if("clear"===e){let e=t.size>0;return r(),[void 0,e]}if("set"===e)return[r(s[0],b(s[1],this.trigger,this.depth)),!0];if("delete"===e){let t=r(s[0]);return[t,t]}}}class D extends S{static mutatorMethodNames=new Set(["add","delete","clear"]);constructor(t,e){super(t,D.mutatorMethodNames,e)}callOrgMutatorMethod(t,e,r,...s){if("add"===e)return[r(b(s[0],this.trigger,this.depth)),!0];if("clear"===e){let e=t.size>0;return r(),[void 0,e]}if("delete"===e){let t=r(s[0]);return[t,t]}}}function A(t,e){return"number"==typeof t?E.bind(void 0,t):E(void 0,t,e)}function E(t,e,r){let s=Symbol(r+"_trigger");Object.defineProperty(e,r,{get(){let e=this[s];return e||(this[s]=e=l(t)),e.get()},set(e){let r=this[s];r?r.set(e):this[s]=r=l(t,e)}})}function C(t,e,r){let s=Symbol(e);if(r.value){let t=r.value;r.value=function(e){let r=this[s];return r||(this[s]=r=g(t,this)),r.get()}}else{if(!r.get)throw new Error("@computed property requires get() accessor");let t=r.get;if(r.get=function(){let e=this[s];return e||(this[s]=e=g(t,this)),e.get()},r.set){let t=r.set;r.set=function(e){d.enterMutationScope();try{t.call(this,e)}finally{d.exitMutationScope()}}}}}function T(t,e,r=-1){if(t===e)return!0;if(null==t&&null==e)return!0;if(0===r)return!1;if(null==t||null==e)return!1;if(typeof t!=typeof e)return!1;if(Array.isArray(t)!==Array.isArray(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(let s=0,n=t.length;s<n;s++)if(!T(t[s],e[s],r-1))return!1;return!0}if("object"==typeof t){for(let s in t)if(!T(t[s],e[s],r-1))return!1;for(let r in e)if(!(r in t))return!1;return!0}return!1}let U={key:{type:0},ref:{type:0},vnref:{type:0},updateStrategy:{type:0},id:{type:1},class:{type:1},style:{type:1,set:function(t,e,r){wt?wt.setElementStyle(t,r,1):"string"==typeof r&&t.setAttribute(e,r)},diff:function(t,e,r){if(e!==r&&(wt||"string"==typeof e&&"string"==typeof r)){if("string"==typeof e&&"string"==typeof r)return r;if("object"==typeof e&&"object"==typeof r){let t=wt.diffStylesets(e,r);return null==t?void 0:t}if("string"==typeof e){let t=wt.stylesetToString(r);return e!==t?t:void 0}return wt.stylesetToString(e)!==r?r:void 0}},update:function(t,e,r){"object"==typeof r?wt&&wt.setElementStringStyle(t,r,1):t.setAttribute(e,r)}},media:{type:1,set:function(t,e,r){t[e]=wt.mediaToString(r)},diff:function(t,e,r){if(e===r)return;if(!wt&&("string"!=typeof e||"string"!=typeof r))return;let s=wt.mediaToString(e),n=wt.mediaToString(r);return n===s?void 0:n},update:function(t,e,r){t[e]=r}},value:{type:1,set:O,diff:function(t,e,r){return r},remove:function(t,e){t.value=null}},defaultValue:{type:1,set:O,diff:I,remove:j},checked:{type:1,set:W,diff:function(t,e,r){return r},remove:function(t,e){t.checked=!1}},defaultChecked:{type:1,set:W,diff:I,remove:j},click:{type:2,schedulingType:2},mousemove:{type:2,schedulingType:1},mouseover:{type:2,schedulingType:1},pointermove:{type:2,schedulingType:1},pointerover:{type:2,schedulingType:1},input:{type:2,schedulingType:1},scroll:{type:2,schedulingType:1},touchmove:{type:2,schedulingType:1},wheel:{type:2,schedulingType:1}};function P(t){return"string"==typeof t?t:Array.isArray(t)?t.map((t=>P(t))).filter((t=>!!t)).join(" "):null==t?"":t.toString()}function M(t,e){if(t in U)throw new Error(`Attribute ${t} is already registered.`);U[t]=e}function k(t){return U[t]}function R(t,e,r,s){if(r){let n=r.attrName||e;r.set?r.set(t,n,s):t.setAttribute(n,P(s))}else t.setAttribute(e,P(s))}function V(t,e,r,s,n){if(!r)return s!==n&&(t.setAttribute(e,P(n)),!0);let i;if(r.diff){if(i=r.diff(e,s,n),void 0===i)return!1}else{if(s===n)return!1;i=n}let o=r.attrName||e;return r.update?r.update(t,o,i):(r.remove&&!r.set&&r.remove(t,o),r.set?r.set(t,o,i):t.setAttribute(o,P(i))),!0}function F(t,e,r){if(r){let s=r.attrName||e;r.remove?r.remove(t,s):t.removeAttribute(s)}else t.removeAttribute(e)}function O(t,e,r){t.value=r}function I(t,e,r){}function j(t,e){}function W(t,e,r){t.checked=r}function q(t){return It(t)}function z(){return At}function L(t,e,...r){return t[ae](e,r)}let H=Symbol("symRef");class _{changedEvent;constructor(e,r){void 0!==e&&(this.changedEvent=new t,this.changedEvent.attach(e)),this[H]=r}addListener(e){this.changedEvent||(this.changedEvent=new t),this.changedEvent.attach(e)}removeListener(t){this.changedEvent&&this.changedEvent.detach(t)}get r(){return this[H]}set r(t){this[H]!==t&&(this[H]=t,this.changedEvent&&this.changedEvent.fire(t))}}class B extends _{}function $(t,e){let r=Symbol(e+"_ref");function s(t){let e=t[r];return e||(t[r]=e=new G,e.proxy=new Proxy({},e)),e}Object.defineProperty(t,e,{set(t){s(this).obj=t},get(){return s(this).proxy}})}class G{proxy;obj;get(t,e,r){if("r"===e)return this.obj;let s=this.obj[e];return"function"==typeof s?s.bind(this.obj):s}set(t,e,r,s){return"r"===e?this.obj=r:this.obj[e]=r,!0}deleteProperty(t,e){return Reflect.deleteProperty(this.obj,e)}defineProperty(t,e,r){return Reflect.defineProperty(this.obj,e,r)}has(t,e){return Reflect.has(this.obj,e)}getPrototypeOf(t){return Reflect.getPrototypeOf(this.obj)}isExtensible(t){return Reflect.isExtensible(this.obj)}getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(this.obj,e)}ownKeys(t){return Reflect.ownKeys(this.obj)}}function K(t,e,r){"function"==typeof t?t(e):r&&t.r!==r||(t.r=e)}function J(t){return new vt(t)}function Q(t,e){M(t,{type:3,handlerClass:e})}function X(t){M(t,{type:2})}class Y{props;vn;constructor(t){t&&(this.props=t)}displayName;get isMounted(){return null!=this.vn}updateMe(t,e,r){this.vn?.updateMe(t,e||this,r)}callMeBeforeUpdate(t,e){this.vn?.callMe(t,!0,e)}callMeAfterUpdate(t,e){this.vn?.callMe(t,!1,e)}wrapCallback(t,e,r){return this.vn?.wrapCallback(t,e,r)}}function Z(t){}Y.prototype.displayName=void 0,Y.prototype.willMount=void 0,Y.prototype.didMount=void 0,Y.prototype.didReplace=void 0,Y.prototype.willUnmount=void 0,Y.prototype.beforeUpdate=void 0,Y.prototype.afterUpdate=void 0,Y.prototype.shouldUpdate=void 0,Y.prototype.handleError=void 0,Y.prototype.getUpdateStrategy=void 0;class tt extends Y{constructor(t){super(t)}render(){}}class et extends Y{constructor(t){super(t)}render(){}}function rt(t,e=null){!function(t,e){let r=e||document.body,s=r[St];s||(s=new bt(r),r[St]=s,s.willMount()),s.setContent(t,!1)}(t,e)}function st(t=null){!function(t){let e=t||document.body;if(!e)return;let r=e[St];r&&(delete e[St],r.setContent(null,!1),zt((()=>r.willUnmount()),!1))}(t)}let nt=Symbol();function it(t,e,r){if(!r.value)throw new Error("@noWatcher decorator can only be applied to methods.");r.value[nt]=!0}function ot(t,e){let r="_m_"+e;Object.defineProperty(t,e,{set(t){this[r]!==t&&(this[r]=t,this.vn&&this.vn.requestUpdate())},get(){return this[r]}})}class lt{parent;creator;index;anchorDN;key;subNodes;updateStrategy;ownDN;updateRequested;partialUpdateRequested;ignoreUnmount;lastUpdateTick;supportsErrorHandling;get isMounted(){return null!=this.anchorDN}getFirstDN(){if(!this.subNodes)return null;let t;for(let e of this.subNodes)if(t=e.getFirstDN())return t;return null}getLastDN(){if(!this.subNodes)return null;let t;for(let e=this.subNodes.length-1;e>=0;e--)if(t=this.subNodes[e].getLastDN())return t;return null}getImmediateDNs(){if(!this.subNodes)return null;let t=[];return this.subNodes.forEach((e=>e.collectImmediateDNs(t))),0===t.length?null:t}collectImmediateDNs(t){this.subNodes&&this.subNodes.forEach((e=>e.collectImmediateDNs(t)))}get depth(){let t=0;for(let e=this.parent;e;e=e.parent)t++;return t}requestUpdate(t,e){this.updateRequested||(qt(this,t,e),this.updateRequested=!0)}requestPartialUpdate(t){this.partialUpdateRequested||(qt(this,void 0,t),this.partialUpdateRequested=!0)}publishService(t,e){void 0===this.publishedServices&&(this.publishedServices=new Map),this.publishedServices.get(t)!==e&&(this.publishedServices.set(t,e),function(t,e){let r=Et.get(t);void 0===r&&(r=new Dt,Et.set(t,r)),r.publishingVNs.add(e);for(let e of r.subscribedVNs)e.notifyServiceChanged(t)}(t,this))}unpublishService(t){void 0!==this.publishedServices&&(this.publishedServices.delete(t),function(t,e){let r=Et.get(t);if(void 0!==r)if(r.publishingVNs.delete(e),0===r.publishingVNs.size&&0===r.subscribedVNs.size)Et.delete(t);else for(let e of r.subscribedVNs)e.notifyServiceChanged(t)}(t,this),0===this.publishedServices.size&&(this.publishedServices=void 0))}subscribeService(t,e,r,s){void 0===this.subscribedServices&&(this.subscribedServices=new Map);let n=new ut;n.ref=e,n.defaultService=r,n.useSelf=!!s,this.subscribedServices.set(t,n),function(t,e){let r=Et.get(t);void 0===r&&(r=new Dt,Et.set(t,r)),r.subscribedVNs.add(e)}(t,this),K(e,this.getService(t,r))}unsubscribeService(t){if(void 0===this.subscribedServices)return;let e=this.subscribedServices.get(t);void 0!==e&&(K(e.ref,void 0),this.subscribedServices.delete(t),function(t,e){let r=Et.get(t);void 0!==r&&(r.subscribedVNs.delete(e),0===r.publishingVNs.size&&0===r.subscribedVNs.size&&Et.delete(t))}(t,this),0===this.subscribedServices.size&&(this.subscribedServices=void 0))}getService(t,e,r){let s=this.findService(t,r);return void 0!==s?s:e}findService(t,e){if(e&&void 0!==this.publishedServices){let e=this.publishedServices.get(t);if(void 0!==e)return e}return this.parent?this.parent.findService(t,!0):void 0}notifyServiceChanged(t){if(void 0===this.subscribedServices)return;let e=this.subscribedServices.get(t);void 0!==e&&K(e.ref,this.getService(t,e.defaultService))}publishedServices;subscribedServices}class ut{ref;defaultService;useSelf}class ht extends lt{comp;mount(){let t=this.comp;t.vn=this;let e=t.willMount;if(e){let r=Ot(t);e.call(t),Ot(r)}let r=t.render;r[nt]?this.actRender=r.bind(t):this.actRender=this.renderWatcher=a(r,this.requestUpdate,t,this),t.handleError&&(this.supportsErrorHandling=!0),this.comp.getUpdateStrategy&&(this.updateStrategy=t.getUpdateStrategy())}unmount(){let t=this.comp,e=t.willUnmount;if(e)try{let r=Ot(t);e.call(t),Ot(r)}catch(t){console.error(`Exception in willUnmount of component '${this.name}'`,t)}this.renderWatcher&&(this.renderWatcher.dispose(),this.renderWatcher=null),t.vn=void 0}render(){let t=Ot(this.comp),e=this.actRender();return Ot(t),e}handleError(t){let e=Ot(this.comp),r=this.comp.handleError(t);return Ot(e),r}updateMe(t,e,r){t?yt.update(t,e||this.comp,r):this.requestUpdate()}callMe(t,e,r){zt(t,e,r||this.comp,this.comp)}wrapCallback(t,e,r){return It({func:t,funcThisArg:e||this.comp,creator:this.comp,schedulingType:r})}renderWatcher;actRender}class at extends ht{constructor(t){super(),this.comp=this.key=t}get name(){return this.comp.displayName?this.comp.displayName:this.comp.constructor.name}isUpdatePossible(t){return this.comp.constructor===t.comp.constructor}update(t){return this.comp!==t.comp&&(this.unmount(),this.oldComp=this.comp,this.comp=this.key=t.comp,this.mount(),!0)}didUpdate(){if(this.oldComp){let t=this.comp.didReplace;t&&t.call(this.comp,this.oldComp),this.oldComp=void 0}}oldComp}at.prototype.ignoreUnmount=!1;class ct extends ht{compClass;constructor(t,e,r){super(),this.compClass=t,e?(e.children=r,this.props=e,this.key=e.key):this.props={children:r}}get name(){if(this.comp&&this.comp.displayName)return this.comp.displayName;{let t=this.compClass.name;return null!=this.key&&(t+="@"+this.key),t}}mount(){this.comp=new this.compClass(this.props),super.mount(),this.ref&&(K(this.ref,this.comp),delete this.props.ref),null!=this.key&&delete this.props.key}unmount(){this.ref&&K(this.ref,void 0,this.comp),super.unmount(),this.comp=null}isUpdatePossible(t){return this.compClass===t.compClass}update(t){let e=this.comp.shouldUpdate&&this.comp.shouldUpdate(t.props);return t.ref!==this.ref?(this.ref=t.ref,this.ref&&K(this.ref,this.comp)):this.ref&&K(this.ref,void 0,this.comp),this.key=t.key,this.comp.props=this.props=t.props,e}props;ref}ct.prototype.didUpdate=void 0,ct.prototype.ignoreUnmount=!1;class dt extends lt{elmName;get elm(){return this.ownDN}constructor(t,e,r,s){super(),this.creator=t,this.elmName=e,this.props=r,this.subNodes=s,this.key=r&&(r.key||r.id)}get name(){let t=this.elmName;return null!=this.key&&(t+="@"+this.key),t}getFirstDN(){return this.ownDN}getLastDN(){return this.ownDN}getImmediateDNs(){return this.ownDN}collectImmediateDNs(t){t.push(this.ownDN)}setProps(t,e){t&&(this.propsForPartialUpdate?Object.assign(this.propsForPartialUpdate,t):this.propsForPartialUpdate=t,e&&2!==e?this.requestPartialUpdate():(this.updatePropsOnly(this.propsForPartialUpdate),this.propsForPartialUpdate=null))}setChildren(t,e,r,s,n,i){this.doChildrenOp({op:1,content:t,startIndex:e,endIndex:r,update:s,updateStrategy:n},i)}spliceChildren(t,e,r,s){this.doChildrenOp({op:3,index:t,countToDelete:e,contentToInsert:r},s)}moveChildren(t,e,r,s){this.doChildrenOp({op:4,index:t,count:e,shift:r},s)}swapChildren(t,e,r,s,n){this.doChildrenOp({op:5,index1:t,count1:e,index2:r,count2:s},n)}sliceChildren(t,e,r){this.doChildrenOp({op:2,startIndex:t,endIndex:e},r)}trimChildren(t,e,r){this.doChildrenOp({op:6,startCount:t,endCount:e},r)}growChildren(t,e,r){this.doChildrenOp({op:7,startContent:t,endContent:e},r)}reverseChildren(t,e,r){this.doChildrenOp({op:8,startIndex:t,endIndex:e},r)}doChildrenOp(t,e){2===e?function(t,e){if(t.anchorDN)try{Bt(t,e)}catch(e){let r=t.getService("StdErrorHandling");r?r.reportError(e):console.error("BUG: updateNode threw exception but StdErrorHandling service was not found.",e)}}(this,t):this.requestUpdate(t)}clone(){let t=new dt(this.creator,this.elmName,this.props,this.subNodes);return t.clonedFrom=this,t}mount(){let t=this.clonedFrom;if(t&&t.ownDN)this.ownDN=t.ownDN.cloneNode(!1),this.attrs=t.attrs,this.events=t.events,this.customAttrs=t.customAttrs,this.clonedFrom=null;else{let t=this.props?.xmlns;if(t)this.ownDN=document.createElementNS(t,this.elmName);else{let t=gt[this.elmName];if("number"==typeof t)switch(t){case 1:this.ownDN=document.createElement(this.elmName);break;case 2:this.ownDN=document.createElementNS(pt,this.elmName);break;case 3:this.ownDN=document.createElementNS(ft,this.elmName)}else this.ownDN=t?document.createElementNS(t.ns,t.name||this.elmName):document.createElementNS(this.anchorDN.namespaceURI,this.elmName)}this.props&&(this.parseProps(this.props),this.attrs&&this.addAttrs())}this.events&&this.addEvents(),this.customAttrs&&this.addCustomAttrs(),this.ref&&K(this.ref,this.ownDN),this.vnref&&K(this.vnref,this)}unmount(){this.ref&&K(this.ref,void 0,this.ownDN),this.vnref&&K(this.vnref,void 0,this),this.customAttrs&&this.removeCustomAttrs()}isUpdatePossible(t){return this.elmName===t.elmName}update(t){return this.creator===t.creator&&T(this.props,t.props,3)||(t.props&&t.parseProps(t.props),t.ref!==this.ref&&(this.ref=t.ref,this.vnref=t.vnref,this.ref&&K(this.ref,this.ownDN),this.vnref&&K(this.vnref,this)),this.props=t.props,this.key=t.key,this.updateStrategy=t.updateStrategy,this.updateAttrs(t.attrs),this.updateEvents(t.events),this.updateCustomAttrs(t.customAttrs)),null!=this.subNodes||null!=t.subNodes}performPartialUpdate(){this.updatePropsOnly(this.propsForPartialUpdate),this.propsForPartialUpdate=void 0}updatePropsOnly(t){for(let e in t){let r=t[e],s=k(e),n=s?s.type:"function"==typeof r||"object"==typeof r?2:1;1===n?this.updateAttrOnly(e,s,r):2===n?this.updateEventOnly(e,s,r):3===n?this.updateCustomAttrOnly(e,s,r):"key"===e?this.key=r:"ref"===e?r!==this.ref&&(this.ref=r,r&&K(this.ref,this.ownDN)):"vnref"===e?r!==this.vnref&&(this.vnref=r,r&&K(this.vnref,this)):"updateStrategy"===e&&(this.updateStrategy=r)}}parseProps(t){for(let e in t){let r=t[e];if(null!=r&&!1!==r){let t=k(e),s=t?t.type:"function"==typeof r||"object"==typeof r?2:1;if(1===s)this.attrs||(this.attrs={}),this.attrs[e]={info:t,val:r};else if(2===s){let s=this.getEventRTD(t,r);s&&(this.events||(this.events={}),this.events[e]=s)}else 0===s?("ref"===e&&(this.ref=r),"vnref"===e?this.vnref=r:"updateStrategy"===e&&(this.updateStrategy=r)):(this.customAttrs||(this.customAttrs={}),this.customAttrs[e]={info:t,val:r,handler:void 0})}}}addAttrs(){for(let t in this.attrs){let e=this.attrs[t];R(this.ownDN,t,e.info,e.val)}}updateAttrs(t){let e=this.ownDN,r=this.attrs;if(r)for(let s in r){let n=r[s],i=t?t[s]:void 0;i&&i.val?n.val!==i.val&&V(e,s,n.info,n.val,i.val):F(e,s,n.info)}if(t)for(let s in t){if(r&&s in r)continue;let n=t[s];R(e,s,n.info,n.val)}this.attrs=t}updateAttrOnly(t,e,r){let s=this.attrs&&this.attrs[t];null==r||!1===r?s&&(F(this.ownDN,t,e),delete this.attrs[t]):s?(V(this.ownDN,t,e,s.val,r),s.val=r):(R(this.ownDN,t,e,r),this.attrs||(this.attrs={}),this.attrs[t]={info:e,val:r})}addEvents(){for(let t in this.events)this.addEvent(t,this.events[t])}addEvent(t,e){e.wrapper=It(e),this.ownDN.addEventListener(t,e.wrapper,e.useCapture)}removeEvent(t,e){this.ownDN.removeEventListener(t,e.wrapper,e.useCapture)}updateEvents(t){let e=this.events;if(e)for(let r in e){let s=e[r],n=t?t[r]:void 0;n?this.updateEvent(r,s,n):this.removeEvent(r,s)}if(t)for(let r in t)e&&r in e||this.addEvent(r,t[r]);this.events=t}updateEvent(t,e,r){e.func===r.func&&e.funcThisArg===r.funcThisArg&&e.arg===r.arg&&e.useCapture==r.useCapture?r.wrapper=e.wrapper:(this.ownDN.removeEventListener(t,e.wrapper,e.useCapture),r.wrapper=It(r),this.ownDN.addEventListener(t,r.wrapper,r.useCapture))}updateEventOnly(t,e,r){let s=this.events&&this.events[t],n=null!=r&&this.getEventRTD(e,r);n?s?(this.updateEvent(t,s,n),this.events[t]=n):(this.addEvent(t,n),this.events||(this.events={}),this.events[t]=n):s&&(this.removeEvent(t,s),delete this.events[t])}getEventRTD(t,e){return"function"==typeof e?{func:e,funcThisArg:this.creator,schedulingType:t?t.schedulingType:void 0,creator:this.creator}:{func:e.func,funcThisArg:e.funcThisArg?e.funcThisArg:this.creator,arg:e.arg,schedulingType:e.schedulingType?e.schedulingType:t?t.schedulingType:void 0,creator:e.creator?e.creator:this.creator,useCapture:e.useCapture}}addCustomAttrs(){for(let t in this.customAttrs){let e=this.customAttrs[t];this.addCustomAttr(t,e)||delete this.customAttrs[t]}}addCustomAttr(t,e){try{return e.handler=new e.info.handlerClass(this,e.val,t),!0}catch(e){return console.error(`Error creating handler for custom attribute '${t}': ${e.message}`),!1}}removeCustomAttrs(){for(let t in this.customAttrs)this.removeCustomAttr(t,this.customAttrs[t],!0)}removeCustomAttr(t,e,r){try{e.handler.terminate(r)}catch(e){console.error(`Error terminating handler for custom attribute '${t}': ${e.message}`)}}updateCustomAttrs(t){let e=this.customAttrs;if(e)for(let r in e){const s=e[r],n=t?t[r]:void 0;n?(this.updateCustomAttr(r,s,n),n.handler=s.handler):this.removeCustomAttr(r,s,!1)}if(t)for(let r in t){if(e&&r in e)continue;let s=t[r];this.addCustomAttr(r,s)||delete t[r]}this.customAttrs=t}updateCustomAttr(t,e,r){try{e.handler.update(r.val)}catch(e){console.error(`Error updating handler for custom attribute '${t}': ${e.message}`)}}updateCustomAttrOnly(t,e,r){let s=this.customAttrs&&this.customAttrs[t],n=null!=r&&{info:e,val:r,handler:void 0};n?s?(this.updateCustomAttr(t,s,n),s.val=r):(this.addCustomAttr(t,n),this.customAttrs||(this.customAttrs={}),this.customAttrs[t]=n):s&&(this.removeCustomAttr(t,s,!1),delete this.customAttrs[t])}props;clonedFrom;ref;vnref;attrs;events;customAttrs;propsForPartialUpdate}dt.prototype.render=void 0,dt.prototype.didUpdate=void 0,dt.prototype.supportsErrorHandling=!1,dt.prototype.ignoreUnmount=!1;let pt="http://www.w3.org/2000/svg",ft="http://www.w3.org/1998/Math/MathML",gt={div:1,span:1,tr:1,td:1,svg:2,colorProfile:{ns:pt,name:"color-profile"},math:3},mt=Symbol("symFuncsToNodes");class yt extends lt{constructor(t,e,r,s,n){super(),this.creator=t,this.func=e,this.funcThisArg=r,this.arg=s,this.key=n||s}get name(){let t=this.func.name;return null!=this.key&&(t+="@"+this.key),t}mount(){this.funcThisArg||(this.funcThisArg=this.creator),this.linkNodeToFunc();let t=this.func;t[nt]?this.actFunc=t.bind(this.funcThisArg):this.actFunc=this.funcWatcher=a(t,this.requestUpdate,this.funcThisArg,this)}unmount(){this.funcWatcher&&(this.funcWatcher.dispose(),this.funcWatcher=null),this.unlinkNodeFromFunc(),this.actFunc=void 0}render(){let t=Ot(this.creator),e=this.actFunc(this.arg);return Ot(t),e}update(t){return this.key=t.key,this.func===t.func&&this.funcThisArg===t.funcThisArg?this.arg!==t.arg&&(this.arg=t.arg,!0):(this.unmount(),this.func=t.func,this.funcThisArg=t.funcThisArg,this.arg=t.arg,this.mount(),!0)}linkNodeToFunc(){if(!this.funcThisArg)return;let t=this.funcThisArg[mt];t||(t=new Map,this.funcThisArg[mt]=t),t.set(this.func,this)}unlinkNodeFromFunc(){if(!this.funcThisArg)return;let t=this.funcThisArg[mt];t&&t.delete(this.func)}static findVN(t,e,r){if(!e)return null;let s=e[mt];return s&&s.get(t)}static update(t,e,r){let s=yt.findVN(t,e,r);s&&s.requestUpdate()}func;funcThisArg;arg;funcWatcher;actFunc}yt.prototype.isUpdatePossible=void 0,yt.prototype.didUpdate=void 0,yt.prototype.supportsErrorHandling=!1,yt.prototype.ignoreUnmount=!1;class Nt extends lt{constructor(t,e){super(),this.promise=t.promise,this.errorContentFunc=t.errorContentFunc,this.content=e,this.key=t.key}get isSettled(){return null==this.promise}get name(){let t="Promise";return null!=this.key&&(t+="@"+this.key),t}mount(){this.watchPromise()}render(){return this.content}isUpdatePossible(t){return this.promise===t.promise}update(t){return this.key=t.key,this.content=t.content,this.errorContentFunc=t.errorContentFunc,!0}async watchPromise(){try{this.content=await this.promise,this.promise=null,this.isMounted&&this.requestUpdate()}catch(t){if(this.promise=null,this.content=null,!this.isMounted)return;if(this.errorContentFunc)try{this.content=this.errorContentFunc(t)}catch(t){console.warn("Unhandled rejected promise:",t)}else console.warn("Unhandled rejected promise:",t);this.requestUpdate()}}promise;content;errorContentFunc}class vt extends lt{text;get textNode(){return this.ownDN}constructor(t){super(),this.text=t}get name(){return"#text"}getFirstDN(){return this.ownDN}getLastDN(){return this.ownDN}getImmediateDNs(){return this.ownDN}collectImmediateDNs(t){t.push(this.ownDN)}setText(t,e){t!==this.text&&(e&&2!==e?(this.textForPartialUpdate=t,super.requestPartialUpdate()):this.ownDN.nodeValue=this.text=t)}mount(){this.ownDN=document.createTextNode(this.text)}update(t){return this.text!==t.text&&(this.ownDN.nodeValue=this.text=t.text),!1}performPartialUpdate(){this.ownDN.nodeValue=this.text=this.textForPartialUpdate,this.textForPartialUpdate=void 0}textForPartialUpdate}vt.prototype.unmount=void 0,vt.prototype.render=void 0,vt.prototype.isUpdatePossible=void 0,vt.prototype.didUpdate=void 0,vt.prototype.ignoreUnmount=!1;class bt extends lt{constructor(t){super(),this.anchorDN=t,this.supportsErrorHandling=!0}get name(){return"Root"}setContent(t,e){this.content=t,this.requestUpdate()}render(){return this.error||this.waiting?null:this.content}willMount(){this.publishService("StdErrorHandling",this)}willUnmount(){this.unpublishService("StdErrorHandling")}handleError(t){if(t instanceof Promise){let e=t;this.thrownPromises.add(e),e.then((()=>{this.onPromiseFulfilled(e)})),e.catch((()=>{this.onPromiseFulfilled(e)})),this.waiting=!0}else console.error("Unhandled error\n",t),this.error=!0;return null}restart(){this.error=!1,this.requestUpdate()}reportError(t){this.handleError(t),this.requestUpdate()}onPromiseFulfilled(t){this.thrownPromises.delete(t),0===this.thrownPromises.size&&(this.waiting=!1,this.requestUpdate())}content;error=!1;waiting=!1;thrownPromises=new Set}let wt,St=Symbol("symRootMountPoint");class xt{doDOMUpdate;init(t){this.doDOMUpdate=t}scheduleDOMUpdate(){zt(this.onUpdate,!1,this)}cancelDOMUpdate(){}onUpdate(){this.doDOMUpdate()}}class Dt{publishingVNs=new Set;subscribedVNs=new Set}let At,Et=new Map,Ct=new Map,Tt=new Map,Ut=new Map,Pt=0,Mt=!1,kt=0,Rt=0,Vt=!1,Ft=null;function Ot(t){let e=Ft;return Ft=t,e}function It(t){return jt.bind(t)}function jt(){let t=Ft;Ft=this.creator,p();let e,r=this.schedulingType||2;Vt=1!==r,At=this.arg;try{e=this.func.apply(this.funcThisArg,arguments)}finally{f(),At=void 0,Vt=!1,Ft=t}return r&&Wt(r),e}function Wt(t=4){switch(t){case 2:Ht();break;case 3:Mt||(queueMicrotask(Ht),Mt=!0);break;case 4:0===Pt&&(Pt=requestAnimationFrame(Lt))}}function qt(t,e,r){if(t.anchorDN){if(Ct.set(t,e),t instanceof ht){let e=t.comp,r=e.afterUpdate;r&&Ut.set(r,It({func:r,funcThisArg:e,creator:e})),1!==kt&&(r=e.beforeUpdate,r&&Tt.set(r,It({func:r,funcThisArg:e,creator:e})))}Vt||1===kt||Wt(r||4)}}function zt(t,e,r,s,n){e?Tt.has(t)||(Tt.set(t,It({func:t,funcThisArg:r,creator:s})),Vt||Wt(n||4)):Ut.has(t)||(Ut.set(t,It({func:t,funcThisArg:r,creator:s})),Vt||1===kt||2===kt||Wt(n||4))}function Lt(){Pt=0,Ht()}function Ht(){if(0!==Pt&&(cancelAnimationFrame(Pt),Pt=0),Mt=!1,Tt.size>0){kt=1;let t=Tt;Tt=new Map,_t(t,!0)}if(Ct.size>0){Rt++,kt=2;let t=Ct;Ct=new Map,t.forEach(((t,e)=>{if(e.anchorDN)try{if(e.partialUpdateRequested&&(e.partialUpdateRequested=!1,e.performPartialUpdate()),e.updateRequested){if(e.updateRequested=!1,e.lastUpdateTick===Rt)return;Bt(e,t)}}catch(t){let r=e.getService("StdErrorHandling");r?r.reportError(t):console.error("BUG: updateNode threw exception but StdErrorHandling service was not found.",t)}}))}if(Ut.size>0){kt=3;let t=Ut;Ut=new Map,_t(t,!1)}kt=0}function _t(t,e){t.forEach((t=>{try{t()}catch(t){console.error(`Exception while invoking function ${e?"before":"after"} updating components\n`,t)}}))}function Bt(t,e){if(e)switch(e.op){case 1:!function(t,e){let r=t.subNodes,s=r?r.length:0,n=e.startIndex||0,i=e.endIndex||s;if((i<0||i>s)&&(i=s),e.update)return void te(t,{oldVN:t,oldStartIndex:n,odlEndIndex:i,updateStrategy:e.updateStrategy},le(e.content));let o=i-n;if(o<s)Gt(t,{index:n,countToDelete:o,contentToInsert:e.content});else{let s=t.ownDN;r&&(s&&(s.textContent=null),r.forEach((t=>{Zt(t,!s)})));let n=e.content&&le(e.content);if(n){let e=s||t.anchorDN;Yt(t,n,e,s?null:oe(t,e))}t.subNodes=n}}(t,e);break;case 3:Gt(t,e);break;case 4:!function(t,e){if(0===e.shift||0===e.count)return;let r,s,n,i,o=t.subNodes;o&&o.length,e.shift<0?(r=e.index+e.shift,s=-e.shift,n=e.index,i=e.count):(r=e.index,s=e.count,n=r+s,i=e.shift),Kt(t,{index1:r,count1:s,index2:n,count2:i})}(t,e);break;case 5:Kt(t,e);break;case 2:Qt(t,e);break;case 6:!function(t,e){let r=t.subNodes;r&&Qt(t,{startIndex:e.startCount,endIndex:r.length-e.endCount})}(t,e);break;case 7:!function(t,e){let r=e.startContent&&le(e.startContent),s=e.endContent&&le(e.endContent);if(!r&&!s)return;let n=t.subNodes,i=t.ownDN,o=i||t.anchorDN;if(n){if(t.subNodes=r&&s?r.concat(n,s):r?r.concat(n):n.concat(s),r){Yt(t,r,o,n[0].getFirstDN());let e=r.length;n.forEach((t=>t.index+=e))}s&&Yt(t,s,o,i?null:oe(t,o),t.subNodes.length-s.length)}else{t.subNodes=r&&s?r.concat(s):r||s;let e=i?null:oe(t,o);Yt(t,t.subNodes,o,e)}}(t,e);break;case 8:!function(t,e){let r=t.subNodes;if(!r)return;let s,n,i,o=r.length,l=e.startIndex||0,u=null!=e.endIndex?Math.min(e.endIndex,o):o,h=t.ownDN,a=h||t.anchorDN,c=u===o?h?null:oe(t,a):r[u].getFirstDN();for(let t=u-2;t>=l;t--)s=r[t],re(s,a,c);for(let t=l,e=u-1;t<e;t++,e--)s=r[t],n=r[e],r[t]=n,r[e]=s,i=s.index,s.index=n.index,n.index=i}(t,e)}else $t({oldVN:t});Ft=null}function $t(t){let e=t.oldVN,r=e.render;te(e,t,r?le(r.call(e)):t.newVN.subNodes)}function Gt(t,e){let r=t.subNodes,s=r?r.length:0,n=e.index,i=e.countToDelete||0;i=Math.min(e.countToDelete,s-n);let o=e.contentToInsert&&le(e.contentToInsert);if(0!==i||o){if(i>0){let t=n+i;for(let e=n;e<t;e++)Zt(r[e],!0)}if(o){r?r.splice(n,i,...o):t.subNodes=r=o;let e=t.ownDN,s=e||t.anchorDN,l=n+o.length<r.length?r[n+o.length].getFirstDN():e?null:oe(t,s),u=n+o.length;for(let e=n;e<u;e++)Xt(r[e],t,e,s,l)}else i>0&&r.splice(n,i)}}function Kt(t,e){let r,s,n,i,o=t.subNodes;o&&o.length,e.index1<e.index2?(r=e.index1,s=e.count1,n=e.index2,i=e.count2):(r=e.index2,s=e.count2,n=e.index1,i=e.count1);let l=r+s,u=n-l,h=t.ownDN||t.anchorDN;if(0===u?s<i?Jt(t,o,r,s,n+i,h):Jt(t,o,n,i,r,h):s<=i&&i<=u?(Jt(t,o,r,s,n,h),Jt(t,o,n,i,l,h)):s<=i&&u<=i?(Jt(t,o,r,s,n+i,h),Jt(t,o,l,u,r,h)):(Jt(t,o,n,i,r,h),Jt(t,o,l,u,r,h)),s===i)for(let t=0;t<s;t++){let e=r+t,s=n+t,i=o[e],l=o[s];o[e]=l,l.index=e,o[s]=i,i.index=s}else{let t,e=s+i+u,h=new Array(e),a=0,c=n+i;for(let t=n;t<c;t++)h[a++]=o[t];if(u>0){c=l+u;for(let t=l;t<c;t++)h[a++]=o[t]}c=r+s;for(let t=r;t<c;t++)h[a++]=o[t];a=r;for(let r=0;r<e;r++)t=h[r],t.index=a,o[a++]=t}}function Jt(t,e,r,s,n,i){let o;o=n==e.length?t.ownDN?null:oe(t,i):e[n].getFirstDN();for(let t=0;t<s;t++)re(e[r+t],i,o)}function Qt(t,e){let r=t.subNodes;if(!r)return;let s=r.length,n=e.startIndex||0,i=null!=e.endIndex?Math.min(e.endIndex,s):s;if(i-n!==s){if(i<=n){let e=t.ownDN;return e&&(e.textContent=null),r.forEach((t=>{Zt(t,!e)})),void(t.subNodes=null)}if(n>0)for(let t=0;t<n;t++)Zt(r[t],!0);if(i<s)for(let t=i;t<s;t++)Zt(r[t],!0);t.subNodes=r.slice(n,i),t.subNodes.forEach(((t,e)=>{t.index=e}))}}function Xt(t,e,r,s,n){if(t.anchorDN){let i=t.clone,o=i?i.call(t):t;if(o===t)return t.ignoreUnmount=!0,t.parent=e,t.anchorDN=s,t.index=r,re(t,s,n),t;e.subNodes[r]=o,t=o}t.parent=e,t.anchorDN=s,t.index=r;let i=t.mount;i&&i.call(t);let o=t.ownDN;return i=t.render,i&&(t.subNodes=le(i.call(t))),t.subNodes&&Yt(t,t.subNodes,o||s,o?null:n),o&&s.insertBefore(o,n),t}function Yt(t,e,r,s,n){if(t.supportsErrorHandling)try{n?e.forEach(((e,i)=>Xt(e,t,n+i,r,s))):e.forEach(((e,n)=>Xt(e,t,n,r,s)))}catch(e){let n=le(t.handleError(e));t.subNodes&&(t.ownDN&&(t.ownDN.textContent=null),t.subNodes.forEach((e=>Zt(e,!t.ownDN)))),n&&(t.subNodes=n,n.forEach(((e,n)=>Xt(e,t,n,r,s))))}else n?e.forEach(((e,i)=>Xt(e,t,n+i,r,s))):e.forEach(((e,n)=>Xt(e,t,n,r,s)))}function Zt(t,e){if(t.ignoreUnmount)return void(t.ignoreUnmount=!1);let r=t.ownDN,s=t.unmount;if(s&&s.call(t),r&&(t.ownDN=null,e&&r.remove()),t.subNodes){let s=e&&!r;t.subNodes.forEach((t=>Zt(t,s))),t.subNodes=null}t.anchorDN=null,t.parent=null}function te(t,e,r,s=!0){if(function(t,e){let r=t.oldVN.subNodes,s=t.oldStartIndex||(t.oldStartIndex=0),n=t.odlEndIndex||(t.odlEndIndex=r?r.length:0),i=t.oldLength=n-s,o=e?e.length:0;if(0===o&&0===i)return void(t.noChanges=!0);if(t.allSubNodesProcessed=i===(r?r.length:0),0===o||0===i)return void(t.replaceAllSubNodes=!0);let l,u=t.updateStrategy||t.oldVN.updateStrategy,h=!u?.disableKeyedNodeRecycling,a=u?.ignoreKeys;if(1!==o||1!==i){if(t.subNodeDisps=new Array(o),a)l=ne(t,r,e);else{let i,o,u=new Map,a=[];for(let t=s;t<n;t++)i=r[t],o=i.key,null==o||u.has(o)?a.push(i):u.set(o,i);l=0===u.size?ne(t,a,e):h?function(t,e,r,s){let n,i,o,l=t.subNodeDisps,u=[],h=r.length,a=0,c=!1,d=[];if(s.forEach(((t,s)=>{o=t.key,i=null,null!=o&&(i=e.get(o),i&&e.delete(o)),i||a==h||(i=r[a++]),l[s]=n={newVN:t},i?i===t?(n.action=3,n.oldVN=i,c=!0):i.constructor!==t.constructor||i.isUpdatePossible&&!i.isUpdatePossible(t)?(n.action=1,u.push(i)):(n.action=2,n.oldVN=i,c=!0):(n.action=1,d.push(n))})),e.size>0){let t,r=d.length,s=0;e.forEach((e=>{n=s<r?d[s++]:null,n?(t=n.newVN,e===t?(n.action=3,n.oldVN=e,c=!0):e.constructor!==t.constructor||void 0!==e.isUpdatePossible&&!e.isUpdatePossible(t)?u.push(e):(n.action=2,n.oldVN=e,c=!0)):u.push(e)}))}if(c)for(let t=a;t<h;t++)u.push(r[t]);return u.length>0&&(t.subNodesToRemove=u),c}(t,u,a,e):function(t,e,r,s){let n,i,o,l=t.subNodeDisps,u=[],h=r.length,a=0,c=!1;if(s.forEach(((t,s)=>{o=t.key,i=null,null!=o&&(i=e.get(o),i&&e.delete(o)),i||o||a==h||(i=r[a++]),l[s]=n={newVN:t},i?i===t?(n.action=3,n.oldVN=i,c=!0):o!==i.key||i.constructor!==t.constructor||i.isUpdatePossible&&!i.isUpdatePossible(t)?(n.action=1,u.push(i)):(n.action=2,n.oldVN=i,c=!0):n.action=1})),c){e.forEach((t=>u.push(t)));for(let t=a;t<h;t++)u.push(r[t])}return u.length>0&&(t.subNodesToRemove=u),c}(t,u,a,e)}l?o>8&&!t.subNodeGroups&&(t.subNodeGroups=function(t){let e,r,s,n=t.length,i={action:t[0].action,first:0},o=[i];for(let l=1;l<n;l++)r=t[l],e=r.action,e!==i.action?(i.last=l-1,i.count=l-i.first,i={action:e,first:l},o.push(i)):1!==e&&(s=t[l-1].oldVN,s&&s.index+1===r.oldVN.index||(i.last=l-1,i.count=l-i.first,i={action:e,first:l},o.push(i)));return i.last=n-1,i.count=n-i.first,o}(t.subNodeDisps)):t.replaceAllSubNodes=!0}else{let n=r[s],i=e[0];n===i?t.noChanges=!0:!h&&!a&&i.key!==n.key||n.constructor!==i.constructor||n.isUpdatePossible&&!n.isUpdatePossible(i)?t.replaceAllSubNodes=!0:t.subNodeDisps=[{oldVN:n,newVN:i,action:2}]}}(e,r),e.noChanges)return;let n=t.subNodes;if(n){if(e.replaceAllSubNodes)if(e.allSubNodesProcessed){let e=t.ownDN;e&&(e.textContent=null),n.forEach((t=>{Zt(t,!e)}))}else for(let t=e.oldStartIndex;t<e.odlEndIndex;t++)Zt(n[t],!0);else if(e.subNodesToRemove)for(let t=0,r=e.subNodesToRemove.length;t<r;t++)Zt(e.subNodesToRemove[t],!0);if(!r)if(e.allSubNodesProcessed)t.subNodes=null;else{n.splice(e.oldStartIndex,e.oldLength);for(let t=e.oldStartIndex,r=n.length;t<r;t++)n[t].index=t}}if(r){let n=t.ownDN,i=n||t.anchorDN,o=n?null:oe(t,i);if(!s||t.supportsErrorHandling)ee(t,e,r,i,o);else try{ee(t,e,r,i,o)}catch(s){r=t.handleError(s),te(t,{oldVN:e.oldVN},r,!1)}}if(2===e.action){let r=e.newVN.didUpdate;r&&r.call(t)}t.lastUpdateTick=Rt}function ee(t,e,r,s,n){let i=t.subNodes;if(e.replaceAllSubNodes)if(e.allSubNodesProcessed)t.subNodes=r,Yt(t,r,s,n);else{let o=e.oldStartIndex;i.splice(o,e.oldLength);for(let t=e.oldStartIndex+r.length,s=i.length;t<s;t++)i[t].index=t;Yt(t,r,s,n,o)}else i?e.oldLength>r.length&&i.splice(r.length):t.subNodes=new Array(r.length),e.subNodeGroups?function(t,e,r,s){let n,i,o,l,u=t.subNodes,h=e.subNodeDisps,a=e.subNodeGroups,c=s;for(let s=a.length-1;s>=0;s--){if(l=a[s],1===l.action){let s=l.last;for(let o=l.first;o<=s;o++){n=h[o],i=n.newVN;let s=e.oldStartIndex+o;u[s]=i,Xt(i,t,s,r,c)}}else if(2===l.action){let t=l.first;for(let r=l.last;r>=t;r--){n=h[r],i=n.newVN,o=n.oldVN;let t=e.oldStartIndex+r;o.index=t,u[t]=o,o.update(i)&&$t(n)}}else{let t=l.first;if(u[e.oldStartIndex+t]!==h[t].oldVN)for(let r=l.last;r>=t;r--){o=h[r].oldVN;let t=e.oldStartIndex+r;o.index=t,u[t]=o}}ie(l,h),c=l.firstDN||c}c=s;for(let t=a.length-1;t>0;t--){let e=a[t];if(null!=e.lastDN){if(e.lastDN.nextSibling!==c){let s=a[t-1];e.lastDN.nextSibling===s.firstDN&&e.count>s.count?se(s,h,r,e.firstDN):se(e,h,r,c)}c=e.firstDN}}}(t,e,s,n):function(t,e,r,s){let n=t.subNodes,i=e.subNodeDisps;for(let o=i.length-1;o>=0;o--){let l,u=i[o],h=u.newVN,a=u.oldVN,c=e.oldStartIndex+o;1===u.action?(n[c]=h,l=Xt(h,t,c,r,s)):(n[c]=l=a,a!==h&&a.update(h)&&$t(u),c!==a.index&&re(a,r,s),l.index=c),s=l.getFirstDN()||s}}(t,e,s,n)}function re(t,e,r){let s=t.getImmediateDNs();if(s)if(Array.isArray(s)){if(s[s.length-1].nextSibling===r)return;for(let t of s)e.insertBefore(t,r)}else{if(s.nextSibling===r)return;e.insertBefore(s,r)}}function se(t,e,r,s){let n,i=1===t.action;for(let o=t.first,l=t.last;o<=l;o++)if(n=(i?e[o].newVN:e[o].oldVN).getImmediateDNs(),n)if(Array.isArray(n))for(let t of n)r.insertBefore(t,s);else{if(n.nextSibling===s)return;r.insertBefore(n,s)}}function ne(t,e,r){let s,n,i,o=t.oldStartIndex,l=t.oldLength,u=r.length,h=Math.min(l,u),a=t.subNodeDisps,c=[],d=!1;for(let t=0;t<h;t++)n=e[o+t],i=r[t],a[t]=s={newVN:i},n===i?(s.action=3,s.oldVN=n,d=!0):n.constructor!==i.constructor||n.isUpdatePossible&&!n.isUpdatePossible(i)?(s.action=1,c.push(n)):(s.action=2,s.oldVN=n,d=!0);if(d){if(u>h)for(let t=h;t<u;t++)a[t]={newVN:r[t],action:1};if(l>h)for(let t=h;t<l;t++)c.push(e[o+t])}return c.length>0&&(t.subNodesToRemove=c),d}function ie(t,e){let r=1===t.action;if(1===t.count){let s=r?e[t.first].newVN:e[t.first].oldVN;t.firstDN=s.getFirstDN(),t.lastDN=s.getLastDN()}else{for(let s=t.first;s<=t.last&&!(t.firstDN=(r?e[s].newVN:e[s].oldVN).getFirstDN());s++);for(let s=t.last;s>=t.first&&!(t.lastDN=(r?e[s].newVN:e[s].oldVN).getLastDN());s--);}}function oe(t,e){if(t.ownDN)return null;let r=t.parent;if(!r)return null;let s=r.subNodes;for(let e=t.index+1;e<s.length;e++){let t=s[e];if(!t.anchorDN)return null;const r=t.getFirstDN();if(r)return r}return r.anchorDN!==e||r.ownDN?null:oe(r,e)}function le(t){if(null==t)return null;{let e=t[ue]();return e?Array.isArray(e)?0===e.length?null:e:[e]:null}}let ue=Symbol();Boolean.prototype[ue]=function(t){return null},String.prototype[ue]=function(t){if(0===this.length)return null;let e=new vt(this);return t&&t.push(e),e},Y.prototype[ue]=function(t){let e=this.vn??new at(this);return t&&t.push(e),e},Function.prototype[ue]=function(t){let e=new yt(Ft,this);return t&&t.push(e),e},Array.prototype[ue]=function(t){return 0===this.length?null:(t||(t=[]),this.forEach((e=>{null!=e&&(e instanceof lt?t.push(e):e[ue](t))})),t.length>0?t:null)},lt.prototype[ue]=function(t){return t&&t.push(this),this},Promise.prototype[ue]=function(t){let e=new Nt({promise:this});return t&&t.push(e),e},Object.prototype[ue]=function(t){let e;if("function"==typeof this.render)e=this.vn??new at(this);else{let t=this.toString();if(!t)return null;e=new vt(t)}return t&&t.push(e),e};let he,ae=Symbol();function ce(t){return function(t){return"ownerSVGElement"in t}(t)}function de(t){return function(t){return"svg"===t.tagName}(t)}function pe(){let t,e,r=new Promise((function(r,s){t=r,e=s}));return r.resolve=t,r.reject=e,r}String.prototype[ae]=function(t,e){if(0===e.length)return new dt(Ft,this,t,null);let r=[];return e.forEach((t=>{null!=t&&(t instanceof lt?r.push(t):t[ue](r))})),new dt(Ft,this,t,r.length>0?r:null)},Z[ae]=function(t,e){if(0===e.length)return new dt(Ft,this,t,null);let r=[];return e.forEach((t=>{null!=t&&(t instanceof lt?r.push(t):t[ue](r))})),r.length>0?r:null},tt[ae]=function(t,e){return new yt(Ft,t.func,t.funcThisArg,t.arg,t.key)},et[ae]=function(t,e){return t&&t.promise?new Nt(t,e):null},Y[ae]=function(t,e){return new ct(this,t,1===e.length&&Array.isArray(e[0])?e[0]:e)},Function.prototype[ae]=function(t,e){let r=this(t,1===e.length&&Array.isArray(e[0])?e[0]:e);return r&&r[ue]()};class fe extends Promise{constructor(){super((function(t,e){this.resolve=t,this.reject=e}))}resolve;reject}(async function(){try{wt=await Promise.resolve().then(i.t.bind(i,29,23))}catch(t){}if(wt){let t=wt.registerScheduler(new xt);return wt.setDefaultScheduler(t),t}return 0})().then((t=>he=t))})(),o})()}));